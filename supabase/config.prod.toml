# Production-hardened Supabase config
#
# Usage (local/CLI):
#   supabase start --config supabase/config.prod.toml
#
# Notes:
# - This is intentionally stricter than `supabase/config.toml` (dev).
# - Some settings (SMTP, captcha secrets) must be wired via environment variables / Supabase Dashboard.

project_id = "Sophia_2"

[auth]
enabled = true
# Make sure this matches your real public site URL.
site_url = "https://YOUR_PROD_DOMAIN"
# Add exact allowed redirects (e.g. https://YOUR_PROD_DOMAIN/auth/callback).
additional_redirect_urls = []

# Tokens: keep the default unless you have a reason; shorter expiry reduces blast radius.
jwt_expiry = 3600

enable_refresh_token_rotation = true
refresh_token_reuse_interval = 0

# Consider disabling public signup if you don't want open registration.
enable_signup = true
enable_anonymous_sign_ins = false
enable_manual_linking = false

# Password policy (recommended)
minimum_password_length = 10
password_requirements = "lower_upper_letters_digits_symbols"

[auth.email]
enable_signup = true
double_confirm_changes = true
# Require email confirmation before sign-in
enable_confirmations = true
# Require re-auth to change password
secure_password_change = true

# Captcha (recommended if publicly exposed)
[auth.captcha]
enabled = true
# Choose one: "turnstile" or "hcaptcha"
provider = "turnstile"
secret = "env(SUPABASE_AUTH_CAPTCHA_SECRET)"


